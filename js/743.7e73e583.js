"use strict";(self["webpackChunkarvan"]=self["webpackChunkarvan"]||[]).push([[743],{2974:function(t,e,l){l.d(e,{A:function(){return s},_:function(){return a}});const s={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:`Bearer ${localStorage.getItem("token")}`},a={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest",Authorization:localStorage.getItem("token")}},7137:function(t,e,l){l.d(e,{Z:function(){return p}});var s=l(6252),a=l(3577);const o={class:"p-3 header-article"},i={class:"d-flex"},n=(0,s._)("button",{type:"button",class:"navbar-toggler btn blue me-auto px-4 d-lg-none","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasDarkNavbar","aria-controls":"offcanvasDarkNavbar"},"post",-1),r={class:"d-lg-flex align-items-center"},c=(0,s._)("h1",{class:"text-22 pe-3 text-white",title:"Arvan challenge"}," Arvan Challenge ",-1);function d(t,e,l,d,u,h){return(0,s.wg)(),(0,s.iD)("header",o,[(0,s._)("div",null,[(0,s._)("div",i,[n,(0,s._)("div",r,[c,(0,s._)("span",null,(0,a.zw)(u.username),1)]),(0,s._)("button",{type:"button",class:"btn btn-outline-info ms-auto me-2",onClick:e[0]||(e[0]=(...t)=>h.handleLogout&&h.handleLogout(...t))},"Logout")])])])}l(7658);var u={data(){return{username:""}},created(){const t=localStorage.getItem("username");this.username=t},methods:{handleLogout(){localStorage.clear(),this.$router.push("/#")}}},h=l(3744);const g=(0,h.Z)(u,[["render",d]]);var p=g},7378:function(t,e,l){l.d(e,{Z:function(){return p}});var s=l(6252);const a={class:"d-none col-lg-2 blue d-lg-flex flex-column"},o=(0,s._)("h5",{class:"p-3"},"post",-1),i={class:"d-flex flex-column"},n={class:"offcanvas offcanvas-start blue w-50 flex-column",tabindex:"-1",id:"offcanvasDarkNavbar","aria-labelledby":"offcanvasDarkNavbarLabel"},r=(0,s._)("h5",{class:"p-3"},"post",-1),c={class:"d-flex flex-column"};function d(t,e){const l=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",a,[(0,s._)("div",null,[o,(0,s._)("div",i,[(0,s.Wm)(l,{to:"/allPost",class:"sidebar-items py-1 text-white ps-4"},{default:(0,s.w5)((()=>[(0,s.Uk)("All Articles")])),_:1}),(0,s.Wm)(l,{to:"newArticlePage",class:"sidebar-items py-1 text-white ps-4"},{default:(0,s.w5)((()=>[(0,s.Uk)("New Articles")])),_:1})])])]),(0,s._)("div",n,[(0,s._)("div",null,[r,(0,s._)("div",c,[(0,s.Wm)(l,{to:"/",class:"sidebar-items py-1 text-white ps-4"},{default:(0,s.w5)((()=>[(0,s.Uk)("All Articles")])),_:1}),(0,s.Wm)(l,{to:"newArticlePage",class:"sidebar-items py-1 text-white ps-4"},{default:(0,s.w5)((()=>[(0,s.Uk)("New Articles")])),_:1})])])])],64)}var u=l(3744);const h={},g=(0,u.Z)(h,[["render",d]]);var p=g},7743:function(t,e,l){l.r(e),l.d(e,{default:function(){return J}});var s=l(6252),a=l(3577);const o={class:"body-container vh-100 grid"},i={style:{"min-height":"700px"},class:"d-flex"},n={class:"form-articles col-12 col-lg-10"},r={class:"d-flex justify-content-between"},c=(0,s._)("h2",null,"All Posts",-1),d={class:"table-responsive my-4 overflw-x-auto position-relative d-flex flex-column align-items-center"},u={key:0,class:"spinner-border text-primary mt-5",role:"status",style:{"margin-bottom":"600px"}},h=(0,s._)("span",{class:"visually-hidden"},"Loading...",-1),g=[h],p={key:1,class:"table"},b=(0,s._)("colgroup",null,[(0,s._)("col"),(0,s._)("col"),(0,s._)("col"),(0,s._)("col"),(0,s._)("col",{class:"col-2"}),(0,s._)("col",{class:"col-2"})],-1),m=(0,s._)("thead",null,[(0,s._)("tr",{class:"headOfList"},[(0,s._)("th",{scope:"col"},"#"),(0,s._)("th",{scope:"col"},"Title"),(0,s._)("th",{scope:"col"},"Author"),(0,s._)("th",{scope:"col"},"Tags"),(0,s._)("th",{scope:"col"},"Excerpt"),(0,s._)("th",{scope:"col"},"Created")])],-1),_={class:"pagination btn-group",role:"group","aria-label":"First group"},w=["disabled"],v=["onClick"],A=["disabled"];function f(t,e,l,h,f,y){const x=(0,s.up)("responsive-header"),k=(0,s.up)("sideBar"),P=(0,s.up)("allPoststable");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(x),(0,s._)("section",i,[(0,s.Wm)(k),(0,s._)("div",n,[(0,s._)("div",r,[c,(0,s._)("div",null,[(0,s._)("button",{onClick:e[0]||(e[0]=t=>f.yourArticles=!1),class:(0,a.C_)(["btn",{"btn-secondary":!f.yourArticles}])}," all articles ",2),(0,s._)("button",{onClick:e[1]||(e[1]=t=>(f.yourArticles=!0,f.currentPage=1)),class:(0,a.C_)(["btn",{"btn-secondary":f.yourArticles}])}," your article ",2)])]),(0,s._)("div",d,[f.isLoading?((0,s.wg)(),(0,s.iD)("div",u,g)):((0,s.wg)(),(0,s.iD)("table",p,[b,m,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(y.displayedArticles,((t,e)=>((0,s.wg)(),(0,s.j4)(P,{onDeleteArticle:y.handleArticleDeleted,key:e,shownAriticle:t},null,8,["onDeleteArticle","shownAriticle"])))),128))])),(0,s._)("div",_,[(0,s._)("button",{onClick:e[2]||(e[2]=t=>f.currentPage--),disabled:1===f.currentPage,class:"previousPageBtn btn btn-outline-secondary btn-white"}," < ",8,w),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(y.totalPages,(t=>((0,s.wg)(),(0,s.iD)("button",{key:t,onClick:e=>f.currentPage=t,class:(0,a.C_)(["pageNumberBtn btn btn-outline-secondary",[f.currentPage===t?"active":""]])},(0,a.zw)(t),11,v)))),128)),(0,s._)("button",{onClick:e[3]||(e[3]=t=>f.currentPage++),disabled:f.currentPage===y.totalPages,class:"nextPageBtn btn btn-outline-secondary btn-white"}," > ",8,A)])])])])])}l(7658);var y=l(7137),x=l(7378);const k={class:"bodyOfList"},P={scope:"row"},C={class:"d-md-flex"},D={class:"ms-auto d-inline-block"},L=(0,s._)("span",null,"...",-1),z=(0,s._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",fill:"currentColor",class:"bi bi-caret-down-fill ms-xl-2",viewBox:"0 0 16 16"},[(0,s._)("path",{d:"M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"})],-1),S=[L,z],B=(0,s._)("span",null,"Edit",-1),Z=[B],I=(0,s._)("div",{"data-bs-toggle":"modal","data-bs-target":"#exampleModal",class:"px-2 py-1"},[(0,s._)("span",{style:{cursor:"pointer"}},"Delete")],-1),M={class:"modal fade modal-centered",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},N={class:"modal-dialog modal-dialog-centered"},W={class:"modal-content"},$=(0,s._)("div",{class:"modal-header"},[(0,s._)("h1",{class:"modal-title fs-5 fw-bold",id:"exampleModalLabel"},"Delet article"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),H=(0,s._)("div",{class:"modal-body"}," Are you sure to delet article ",-1),j={class:"modal-footer"},q=(0,s._)("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal"},"No",-1);function U(t,e,l,o,i,n){return(0,s.wg)(),(0,s.iD)("tbody",k,[(0,s._)("tr",null,[(0,s._)("th",P,(0,a.zw)(l.shownAriticle.id),1),(0,s._)("td",null,(0,a.zw)(l.shownAriticle.title),1),(0,s._)("td",null,(0,a.zw)(l.shownAriticle.author),1),(0,s._)("td",null,(0,a.zw)(l.shownAriticle.tags),1),(0,s._)("td",null,(0,a.zw)(l.shownAriticle.excerpt),1),(0,s._)("td",null,[(0,s._)("div",C,[(0,s._)("span",null,(0,a.zw)(l.shownAriticle.date),1),(0,s._)("div",D,[(0,s._)("button",{onClick:e[0]||(e[0]=(...t)=>n.showDropdown&&n.showDropdown(...t)),class:"btn blue-sky text-white"},S),(0,s._)("div",{class:(0,a.C_)([{"d-none":!i.isactive},"edit-delet-dropdown position-absolute z-1 border border-secondary-subtle rounded-1 bg-white"])},[(0,s._)("div",{onClick:e[1]||(e[1]=(...t)=>n.editArticlePage&&n.editArticlePage(...t)),class:"p-2 pb-1 border-bottom",style:{cursor:"pointer"}},Z),I],2)])])])]),(0,s._)("div",M,[(0,s._)("div",N,[(0,s._)("div",W,[$,H,(0,s._)("div",j,[q,(0,s._)("button",{onClick:e[2]||(e[2]=(...t)=>n.deleteArticle&&n.deleteArticle(...t)),type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"Yes")])])])])])}var E=l(1120),O=l(3002),R={data(){return{isactive:!1}},props:{shownAriticle:Object},setup(t){const e=(0,O.pm)();return{toast:e}},mounted(){document.addEventListener("click",this.handleDocumentClick)},methods:{showDropdown(){this.shownAriticle.author==localStorage.getItem("username")&&(this.isactive=!this.isactive),localStorage.setItem("clickedArticle",this.shownAriticle.slug)},handleDocumentClick(t){this.$el.contains(t.target)||(this.isactive=!1)},editArticlePage(){E.Z.push(`/editArticlePage/${localStorage.getItem("clickedArticle")}`)},deleteArticle(){this.$emit("deleteArticle",localStorage.getItem("clickedArticle")),this.handleDocumentClick(Event)}}},T=l(3744);const X=(0,T.Z)(R,[["render",U]]);var Y=X,K=l(6154),F=l(2974),V={name:"HomeView",components:{responsiveHeader:y.Z,sideBar:x.Z,allPoststable:Y},setup(){const t=(0,O.pm)();return{toast:t}},data(){return{shownArticles:[],currentPage:1,isLoading:!0,yourArticles:!1,username:localStorage.getItem("username")}},mounted(){K.Z.get("https://api.realworld.io/api/articles",{params:{limit:34},headers:F.A}).then((t=>{const e=t.data.articles;let l=this.shownArticles.length+1;const s=e.map((t=>{const{title:e,author:s,tagList:a,description:o,createdAt:i,slug:n}=t,r=new Date(i),c=r.toISOString().slice(0,10);return{id:l++,title:e,author:s.username,tags:a.join(", "),excerpt:o.slice(0,20),date:c,slug:n}}));this.shownArticles.push(...s),this.isLoading=!1})).catch((t=>{console.log(t)}))},computed:{loginUsername(){return this.$route.query.username},totalArticlesByAthor(){return this.shownArticles.filter((t=>t.author==this.username))},displayedArticles(){return this.yourArticles?this.totalArticlesByAthor.slice(8*(this.currentPage-1),8*this.currentPage):this.shownArticles.slice(8*(this.currentPage-1),8*this.currentPage)},totalPages(){return this.yourArticles?Math.ceil(this.totalArticlesByAthor.length/8):Math.ceil(this.shownArticles.length/8)}},methods:{handleArticleDeleted(t){K.Z["delete"](`https://api.realworld.io/api/articles/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then((e=>{this.shownArticles=this.shownArticles.filter((e=>e.slug!==t)),this.toast.success("Article deleted successfuly")})).catch((t=>{console.log(t),this.toast.error("you can only delet your article")}))}}};const G=(0,T.Z)(V,[["render",f]]);var J=G}}]);
//# sourceMappingURL=743.7e73e583.js.map